\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{sutras}[2020/11/22 Sutras Package]
\usepackage{keyval}
\usepackage{kvoptions}
\RequirePackage{xeCJK}
\usepackage{nopageno}
\usepackage{multicol}
\usepackage{anyfontsize}
\usepackage{hyperref}
\usepackage[most]{tcolorbox}
\usepackage{cclicenses}
\usepackage{forarray}


\hypersetup {
	pdfauthor= George Matthews,
	pdftitle={Sutra Styles},
	pdfsubject={Buddhism, kanji, 四弘誓願  },
	pdfkeywords={kanji, japan, wanikani, Bodhisattva, Buddhism, Buddha, 四弘誓願 },
	colorlinks=true,
	linkcolor=black,
	anchorcolor=black,
	citecolor=black,
	filecolor=black,
	menucolor=black,
	runcolor=black,
	urlcolor=black,
	bookmarks=true
}


%%% NEW COMMANDS
\newcommand{\kanji}{\centering\fontsize{60}{60}}   %%% set main font size 
\newcommand{\means}{\tcblower\centering}           %%% position lower text

%%% For ending verses
\newcommand{\coda}{	\vspace*{1ex}\heartflow{。}\vspace*{1ex}}

%%% For Haikus
\newcommand{\haiku}[2]{\coda\ForEach{,}{\heartspaced{\thislevelitem}}{#1}\coda{#2}}

%%% To rotate 一
\newcommand{\stick}{\scalebox{-1}[1]{\rotatebox[origin=lb]{90}{ー}}\hspace*{1em}}


%%%%%%%%%%%%%%
% FIXED HEIGHT BOX FOR INCLUDING READINGS AND/OR MEANINGS
% #1: tcolorbox options
% #2: box title

\newtcolorbox{kanjibox}[2][]
{
	colframe = black!0,
	height=3.3cm,    %%%% fixed height boxes!
	size=small,
	colback  = white,
	colupper= black!30,
	coltitle = black,
	halign title= center,
	fontlower= \scriptsize,
	fonttitle= \small, 
	title    = {#2},
	#1,
}

%%% display reading, kanji and meaning
\newcommand{\heartblock}[3]
{
	\begin{kanjibox}{#1}
		\kanji #2
		\means #3
	\end{kanjibox}
}
%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%
% VARIABLE HEIGHT BLOCK FOR JUST KANJI
% #1: tcolorbox options

\newtcolorbox{kanjiflow}[1][]
{
	colframe = black!0,
	size=tight,
	colback  = white,
	colupper= black!75,
	coltitle = black,
	halign title= center,
	fontlower= \tiny,
	fonttitle= \tiny,
	#1,
}

%%% display kanji

\newcommand{\heartflow}[1]
{
	\begin{kanjiflow}[size=tight]{}
		\kanji #1
	\end{kanjiflow}
}


%%% display kanji with more padding

\newcommand{\heartspaced}[1]
{
	\begin{kanjiflow}[size=normal]{}
		\kanji #1
	\end{kanjiflow}
}

%%% For compact verses \compactverse{abcdefg}
\def\flowloop#1{%
	\ifx\relax#1
	\else
	\heartflow{#1}\expandafter\flowloop%
	\fi}
\def\compactverse#1{\flowloop#1\relax}%

%%% For spaced verses \spacedverse{abcdefg}
\def\spacedloop#1{%
	\ifx\relax#1
	\else
	\heartspaced{#1}\expandafter\spacedloop%
	\fi}
\def\spacedverse#1{\spacedloop#1\relax}%

%%% For haiku   \haiku{abcdefg}
\def\haikuloop#1{%
	\ifx\relax#1
	\else
	\heartspaced{#1}\expandafter\haikuloop%
	\fi}
\def\haiku#1{\haikuloop#1\relax}%


\endinput